
import Head from 'next/head';
import styles from '../../styles/Shops.module.css';
import Link from 'next/link';
import Image from 'next/image';

import LocationIcon from '../../components/icons/LocationIcon';
import StarIcon from '../../components/icons/StarIcon';
import FastDeliveryIcon from '../../components/icons/FastDeliveryIcon';
import OffersIcon from '../../components/icons/OffersIcon';
import VegIcon from '../../components/icons/VegIcon';

// --- INTERFACES ---
interface Shop {
    id: number;
    name: string;
    image: string;
    tags: string[];
    rating: number;
    reviews: string;
    deliveryTime: string;
    priceRange: string;
    badges: string[];
}

interface FoodCategory {
    name: string;
    image: string;
}

// --- COMPONENTS ---
const ShopCard = ({ shop }: { shop: Shop }) => (
    <Link href={`/shops/${shop.id}`} passHref>
        <div className={styles.card}>
            <div className={styles.imageContainer}>
                <Image
                    src={shop.image}
                    alt={shop.name}
                    layout="fill"
                    className={styles.cardImage}
                />
                <div className={styles.badgeContainer}>
                    {shop.badges.map(badge => (
                        <span key={badge} className={styles.badge}>{badge}</span>
                    ))}
                </div>
            </div>
            <div className={styles.content}>
                <div className={styles.titleLine}>
                    <h3 className={styles.cardTitle}>{shop.name}</h3>
                    <div className={styles.rating}>
                        <StarIcon />
                        <span>{shop.rating} ({shop.reviews} reviews)</span>
                    </div>
                </div>
                <div className={styles.tags}>
                    {shop.tags.join(', ')}
                </div>
                <div className={styles.details}>
                    <span>{shop.deliveryTime}</span>
                    <span>•</span>
                    <span>{shop.priceRange}</span>
                </div>
            </div>
        </div>
    </Link>
);

const FoodCategoryCard = ({ category }: { category: FoodCategory }) => (
    <div className={styles.categoryCard}>
        <Image
            src={category.image}
            alt={category.name}
            width={80}
            height={80}
            className={styles.categoryImage}
        />
        <h4>{category.name}</h4>
    </div>
);

const Shops = () => {
    const shops: Shop[] = [
        {
            id: 1,
            name: 'Bento Box',
            image: 'https://picsum.photos/300/200?random=s1',
            tags: ['Japanese', 'Sushi', 'Asian'],
            rating: 4.8,
            reviews: '320+',
            deliveryTime: '20-30 mins',
            priceRange: '₹₹ for two',
            badges: ['New', 'Best Seller'],
        },
        {
            id: 2,
            name: 'Taco Town',
            image: 'https://picsum.photos/300/200?random=s2',
            tags: ['Mexican', 'Tacos', 'Fast Food'],
            rating: 4.6,
            reviews: '500+',
            deliveryTime: '15-25 mins',
            priceRange: '₹ for two',
            badges: ['Pure Veg'],
        },
        {
            id: 3,
            name: 'Pasta Palace',
            image: 'https://picsum.photos/300/200?random=s3',
            tags: ['Italian', 'Pasta', 'European'],
            rating: 4.9,
            reviews: '700+',
            deliveryTime: '30-40 mins',
            priceRange: '₹₹₹ for two',
            badges: ['Best Seller'],
        },
    ];

    const foodCategories: FoodCategory[] = [
        { name: 'Indian', image: 'https://picsum.photos/80/80?random=c1' },
        { name: 'Chinese', image: 'https://picsum.photos/80/80?random=c2' },
        { name: 'Italian', image: 'https://picsum.photos/80/80?random=c3' },
        { name: 'Mexican', image: 'https://picsum.photos/80/80?random=c4' },
        { name: 'Japanese', image: 'https://picsum.photos/80/80?random=c5' },
        { name: 'Desserts', image: 'https://picsum.photos/80/80?random=c6' },
    ];

    return (
        <div className={styles.container}>
            <Head>
                <title>Find Restaurants - Foodie</title>
                <meta name="description" content="Discover the best local restaurants and get food delivered to your door." />
            </Head>

            <header className={styles.header}>
                <div className={styles.locationSelector}>
                    <LocationIcon />
                    <div>
                        <h4>Delivering to</h4>
                        <p>123 Main Street, Anytown...</p>
                    </div>
                </div>
                <div className={styles.searchBar}>
                    <input type="text" placeholder="Search restaurants, dishes, cuisines" />
                </div>
            </header>

            <main>
                <section className={styles.filters}>
                    <button className={styles.filterChip}><VegIcon /> Veg / Non-Veg</button>
                    <button className={styles.filterChip}><StarIcon /> Rating</button>
                    <button className={styles.filterChip}><FastDeliveryIcon /> Fast delivery</button>
                    <button className={styles.filterChip}><OffersIcon /> Offers</button>
                    <button className={styles.filterChip}>Open now</button>
                </section>

                <section className={styles.promoSection}>
                     <div className={styles.promoBanner}>
                        <h3>Flat 30% OFF</h3>
                        <p>on orders above ₹500</p>
                    </div>
                </section>

                <section className={styles.categorySection}>
                    <h2 className={styles.sectionTitle}>Food Categories</h2>
                    <div className={styles.categoryGrid}>
                        {foodCategories.map((category) => (
                            <FoodCategoryCard key={category.name} category={category} />
                        ))}
                    </div>
                </section>

                <h2 className={styles.sectionTitle}>Restaurants For You</h2>
                <div className={styles.grid}>
                    {shops.map((shop) => (
                        <ShopCard key={shop.id} shop={shop} />
                    ))}
                </div>
            </main>
        </div>
    );
};

export default Shops;
